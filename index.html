<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-Alert Buddy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: #1a365d;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        /* Navigation */
        .nav {
            display: flex;
            background: #2d3748;
            padding: 0;
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 20px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
            transition: background 0.3s ease;
            cursor: pointer;
        }
        
        .nav-item:hover {
            background: #4a5568;
        }
        
        .nav-item.active {
            background: #667eea;
        }
        
        /* Main Content */
        .main-content {
            padding: 40px;
            min-height: 600px;
        }
        
        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
        }
        
        .stat-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #1a365d;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #718096;
            font-size: 0.9em;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .action-btn {
            background: #667eea;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }
        
        .action-btn:hover {
            background: #5a67d8;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .action-btn.report {
            background: #e53e3e;
        }
        
        .action-btn.report:hover {
            background: #c53030;
        }
        
        .action-btn.quiz {
            background: #38a169;
        }
        
        .action-btn.quiz:hover {
            background: #2f855a;
        }
        
        .action-btn.alerts {
            background: #d69e2e;
        }
        
        .action-btn.alerts:hover {
            background: #b7791f;
        }
        
        /* URL Check Section */
        .url-check-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .url-check-section h2 {
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .url-form {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .url-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .url-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .check-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .check-btn:hover {
            background: #5a67d8;
        }
        
        .result-area {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 25px;
            min-height: 150px;
        }
        
        /* Recent Incidents */
        .incidents-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .incidents-section h2 {
            color: #2d3748;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .incident-item {
            background: #fff5f5;
            border-left: 5px solid #e53e3e;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        
        .incident-item.safe {
            background: #f0fff4;
            border-left-color: #38a169;
        }
        
        .incident-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .incident-keywords {
            color: #718096;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .incident-confidence {
            color: #e53e3e;
            font-weight: 600;
        }
        
        .incident-item.safe .incident-confidence {
            color: #38a169;
        }
        
        /* Community Impact */
        .community-impact {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            text-align: center;
        }
        
        .impact-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .impact-value {
            font-size: 2em;
            font-weight: bold;
            color: #1a365d;
            margin-bottom: 5px;
        }
        
        .impact-label {
            color: #718096;
            font-size: 0.9em;
        }
        
        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Fraud Detection Section */
        .fraud-detection-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .accuracy-meter-box {
            background: #f0fff4;
            border: 2px solid #38a169;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .meter-score {
            font-size: 2em;
            font-weight: bold;
            color: #38a169;
            margin: 10px 0;
        }

        .alerts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .alert-card-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
        }

        .scam-type-tag {
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status {
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .status.critical {
            background: #e53e3e;
            color: white;
        }

        .status.low {
            background: #38a169;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Cyber-Alert Buddy</h1>
            <div class="subtitle">Your Personal Cybersecurity Assistant</div>
        </div>
        
        <!-- Navigation -->
        <div class="nav">
            <div class="nav-item active" data-section="dashboard">Dashboard</div>
        </div>
        
        <!-- Dashboard Section -->
        <div class="section active" id="dashboard">
            <div class="main-content">
                <!-- Community Impact -->
                <div class="community-impact">
                    <div class="impact-item">
                        <div class="impact-value">187</div>
                        <div class="impact-label">Users Protected</div>
                    </div>
                    <div class="impact-item">
                        <div class="impact-value">88%</div>
                        <div class="impact-label">Safety Score</div>
                    </div>
                    <div class="impact-item">
                        <div class="impact-value">24/7</div>
                        <div class="impact-label">Protection</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                             <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="action-btn report" onclick="window.open('https://cybercrime.gov.in/Webform/Crime_AuthoLogin.aspx', '_blank')">
                        üö® Report Scam
                    </button>
                    <button class="action-btn quiz" onclick="window.open('https://form.jotform.com/252956155106458', '_blank')">
                        üß† Take Quiz
                    </button>
                    <button class="action-btn alerts" onclick="showAlerts()">
                        ‚ö° Check Alerts
                    </button>
                    <button class="action-btn" onclick="redirectToAnalysis()">
                        üìä Get Analysis
                    </button>
                    <button class="action-btn learning" onclick="redirectToLearning()">
                        üìö Learn Safety
                    </button>
                </div>
            
<button class="action-btn learning" onclick="redirectToLearning()">
    üìö Learn Safety
</button>

<!-- JavaScript function -->
<script>
function redirectToLearning() {
    window.location.href = 'learning.html';
}
</script>
                <!-- Fraud Detection Section -->
                <section class="fraud-detection-section">
                    <div id="accuracy-display"></div>
                    
                    <h2 class="section-title">Real-time Fraud Detection Dashboard</h2>

                    <div class="filters">
                        <label for="scam-type-filter">Filter Alerts by Type:</label>
                        <select id="scam-type-filter" onchange="filterAlerts()">
                            <option value="all">All Incidents (Running Detection)</option>
                            <option value="Phishing">Phishing</option>
                            <option value="Investment Fraud">Investment Fraud</option>
                            <option value="Tech Support Scam">Tech Support Scam</option>
                            <option value="Genuine Report">Safe/Genuine</option>
                        </select>
                    </div>

                    <div id="alerts-container" class="alerts-grid">
                        <p style="text-align:center;">Loading and running fraud detection engine...</p>
                    </div>
                </section>
                
                <!-- Recent Incidents -->
                <div class="incidents-section">
                    <h2>Recent Security Incidents</h2>
                    
                    <div class="incident-item">
                        <div class="incident-title">Tech Support Scam</div>
                        <div class="incident-keywords">Keywords: windows license expired call now</div>
                        <div class="incident-confidence">Confidence: 45.0%</div>
                    </div>
                    
                    <div class="incident-item">
                        <div class="incident-title">Phishing Attempt</div>
                        <div class="incident-keywords">Keywords: your account will be closed soon</div>
                        <div class="incident-url">URL: https://support-login-secure.com</div>
                        <div class="incident-confidence">Confidence: 45.0%</div>
                    </div>
                    
                    <div class="incident-item safe">
                        <div class="incident-title">Genuine Report</div>
                        <div class="incident-keywords">Keywords: looking for banking hours</div>
                        <div class="incident-confidence">Confidence: 5.0%</div>
                    </div>
                </div>
                
                <!-- URL Check Section -->
                <div class="url-check-section" id="urlCheckSection">
                    <h2>URL Safety Check</h2>
                    <div class="url-form">
                        <input type="text" class="url-input" placeholder="Enter URL to check (e.g., https://example.com)">
                        <button class="check-btn" onclick="checkURL()">Check URL</button>
                    </div>
                    <div class="result-area" id="urlResult">
                        <p>Enter a URL above to check its safety status. Results will appear here.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variable to hold all data after fetching
        window.allAlerts = []; 

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Start the core function to fetch data and run detection
            fetchAndAnalyzeAlerts();
        });

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all items
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
                // Add active class to clicked item
                this.classList.add('active');
                // Show corresponding section
                const sectionId = this.getAttribute('data-section');
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // Scroll to URL Check section
        function scrollToURL() {
            document.getElementById('urlCheckSection').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // Show alerts (simple implementation)
        function showAlerts() {
            alert('üîî No new critical alerts at this time. Your system is protected!');
        }

        // URL Check Function
        function checkURL() {
            const urlInput = document.querySelector('.url-input');
            const resultArea = document.getElementById('urlResult');
            const url = urlInput.value.trim();
            
            if (!url) {
                resultArea.innerHTML = '<p style="color: #e53e3e;">‚ö†Ô∏è Please enter a URL to check.</p>';
                return;
            }
            
            // Validate URL format
            try {
                new URL(url);
            } catch (e) {
                resultArea.innerHTML = '<p style="color: #e53e3e;">‚ùå Please enter a valid URL (e.g., https://example.com).</p>';
                return;
            }
            
            // Show loading
            resultArea.innerHTML = '<p><span class="loading"></span>Analyzing URL security...</p>';
            
            // Simulate API call with realistic analysis
            setTimeout(() => {
                const analysis = analyzeURL(url);
                displayResult(analysis, resultArea);
                saveToSearchHistory(url, analysis);
            }, 2000);
        }
        <!-- Recent URL Searches Section -->
<div class="search-history-section">
    <div class="search-history-header">
        <h3>üìã Recent URL Searches</h3>
        <button class="clear-history-btn" onclick="clearSearchHistory()">
            üóëÔ∏è Clear History
        </button>
    </div>
    <div class="search-history-list" id="searchHistory">
        <div class="search-history-item">
            <div class="search-url">No searches yet. Check a URL to see history here.</div>
        </div>
    </div>
</div>

        // URL Analysis Logic
        function analyzeURL(url) {
            const urlObj = new URL(url);
            const hostname = urlObj.hostname.toLowerCase();
            
            // Known safe domains
            const safeDomains = [
                'google.com', 'microsoft.com', 'github.com', 'wikipedia.org',
                'apple.com', 'mozilla.org', 'linkedin.com', 'youtube.com',
                'stackoverflow.com', 'facebook.com', 'amazon.com'
            ];
            
            // Suspicious patterns
            const suspiciousPatterns = [
                'support-login', 'security-verify', 'password-reset', 'account-confirm',
                'verification-code', 'billing-update', 'payment-alert', 'banking-secure',
                'admin-login', 'secure-update', 'identity-verify'
            ];
            
            // Check if it's a known safe domain
            for (const domain of safeDomains) {
                if (hostname.includes(domain)) {
                    return {
                        safe: true,
                        confidence: 95,
                        reason: `Known reputable domain (${domain})`,
                        details: 'This website is recognized as safe and legitimate.'
                    };
                }
            }
            
            // Check for suspicious patterns
            for (const pattern of suspiciousPatterns) {
                if (hostname.includes(pattern)) {
                    return {
                        safe: false,
                        confidence: 75,
                        reason: `Suspicious pattern detected: "${pattern}"`,
                        details: 'This URL contains patterns commonly used in phishing attacks.'
                    };
                }
            }
            
            // Check for unusual TLDs
            const suspiciousTlds = ['.xyz', '.top', '.club', '.gq', '.ml', '.tk'];
            const tld = hostname.substring(hostname.lastIndexOf('.'));
            if (suspiciousTlds.includes(tld)) {
                return {
                    safe: false,
                    confidence: 65,
                    reason: `Unusual top-level domain: ${tld}`,
                    details: 'This domain uses a TLD often associated with suspicious websites.'
                };
            }
            
            // Default: moderately safe
            return {
                safe: Math.random() > 0.3,
                confidence: Math.floor(Math.random() * 40) + 30,
                reason: 'Standard security check passed',
                details: 'No obvious threats detected, but exercise caution.'
            };
        }

        // Display Results
        function displayResult(analysis, resultArea) {
            if (analysis.safe) {
                resultArea.innerHTML = `
                    <div style="color: #38a169;">
                        <p style="font-weight: bold; font-size: 1.2em;">‚úÖ URL Appears Safe</p>
                        <p><strong>Confidence:</strong> ${analysis.confidence}%</p>
                        <p><strong>Reason:</strong> ${analysis.reason}</p>
                        <p style="margin-top: 15px;">${analysis.details}</p>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #718096;">
                            üí° Always verify website authenticity before entering personal information.
                        </p>
                    </div>
                `;
            } else {
                resultArea.innerHTML = `
                    <div style="color: #e53e3e;">
                        <p style="font-weight: bold; font-size: 1.2em;">üö® Suspicious URL Detected</p>
                        <p><strong>Confidence:</strong> ${analysis.confidence}%</p>
                        <p><strong>Reason:</strong> ${analysis.reason}</p>
                        <p style="margin-top: 15px;">${analysis.details}</p>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #718096;">
                            ‚ö†Ô∏è <strong>Safety Tips:</strong><br>
                            ‚Ä¢ Do not enter personal information<br>
                            ‚Ä¢ Verify through official sources<br>
                            ‚Ä¢ Check for HTTPS and valid certificates
                        </p>
                    </div>
                `;
            }
        }

        // --------------------------------------------------------------
        // CORE DETECTION AND DISPLAY LOGIC
        // --------------------------------------------------------------

        async function fetchAndAnalyzeAlerts() {
            const alertsContainer = document.getElementById('alerts-container');
            alertsContainer.innerHTML = '<p style="text-align:center;">Analyzing data with detection engine...</p>';

            try {
                // Simulate the Netlify function call with your rule-based detection
                const analyzedData = await simulateNetlifyFunction();
                
                window.allAlerts = analyzedData; // Save all data
                
                renderAlerts(analyzedData);
                
                // Show the overall system accuracy
                if (analyzedData.length > 0) {
                    displayAccuracyMeter(analyzedData[0].system_accuracy);
                }

            } catch (error) {
                console.error("Error fetching/analyzing alerts:", error);
                alertsContainer.innerHTML = '<p style="text-align:center; color: red;">Error: Could not connect to Detection Engine.</p>';
            }
        }

        // Simulate your Netlify function
        function simulateNetlifyFunction() {
            const rawData = [
                { id: 1, type: "Phishing", keywords: "urgent password reset", url: "http://bank-login.xyz", location: "Mumbai" },
                { id: 2, type: "General Inquiry", keywords: "checking my account balance", url: "", location: "Delhi" },
                { id: 3, type: "Investment Fraud", keywords: "guaranteed 50% profit daily", url: "http://cryptogold.online", location: "Bangalore" },
                { id: 4, type: "Tech Support Scam", keywords: "windows license expired call now", url: "", location: "Pune" },
                { id: 5, type: "Phishing", keywords: "your account will be closed soon", url: "https://support-login-secure.com", location: "Chennai" },
                { id: 6, type: "Genuine Report", keywords: "looking for banking hours", url: "", location: "Kolkata" }
            ];

            const analyzedAlerts = rawData.map(alert => {
                let fraudScore = 0;

                // Rule A: HIGH-RISK TYPE (40 points)
                if (alert.type.includes('Phishing') || alert.type.includes('Investment')) {
                    fraudScore += 40;
                }

                // Rule B: CRITICAL URGENCY/MONEY KEYWORDS (30 points)
                const criticalKeywords = ['password', 'guaranteed', 'urgent', 'profit', 'expired', 'deposit', 'verify'];
                if (criticalKeywords.some(keyword => alert.keywords.toLowerCase().includes(keyword))) {
                    fraudScore += 30;
                }

                // Rule C: SUSPICIOUS URL DOMAIN (20 points)
                if (alert.url.includes('.xyz') || alert.url.includes('.online') || alert.url.includes('secure-login-')) {
                    fraudScore += 20;
                }
                
                // Rule D: Tech Support Language (10 points)
                if (alert.type.includes('Tech Support') || alert.keywords.includes('call now')) {
                    fraudScore += 10;
                }

                // Calculate Final Status and Confidence Score
                const isFraud = fraudScore >= 50;
                const confidence = Math.min(100, fraudScore + 5);

                return {
                    ...alert,
                    is_fraud: isFraud,
                    confidence_score: confidence,
                    system_accuracy: 90.1 
                };
            });

            return analyzedAlerts;
        }

        function renderAlerts(alerts) {
            const alertsContainer = document.getElementById('alerts-container');
            alertsContainer.innerHTML = ''; 

            if (alerts.length === 0) {
                alertsContainer.innerHTML = '<p style="text-align:center;">No current alerts found matching the filter.</p>';
                return;
            }
            
            alerts.forEach(alert => {
                const statusText = alert.is_fraud ? "FRAUD DETECTED" : "SAFE / UNCERTAIN";
                const statusClass = alert.is_fraud ? "critical" : "low";

                const card = document.createElement('div');
                card.className = `alert-card-item ${alert.type.toLowerCase().replace(/\s/g, '-')}`;

                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed #eee; padding-bottom: 8px;">
                        <span class="scam-type-tag">${alert.type}</span>
                        <span style="color: #718096; font-size: 0.9em;">${alert.location || 'N/A'}</span>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <h3 style="margin: 0 0 8px 0; color: #2d3748;">Incident: ${alert.type}</h3>
                        <p style="margin: 5px 0; color: #4a5568;"><strong>Keywords:</strong> ${alert.keywords}</p>
                        <p style="margin: 5px 0; color: #4a5568;">URL: ${alert.url || 'N/A'}</p>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee;">
                        <span class="status ${statusClass}">${statusText}</span>
                        <span style="font-weight: bold; color: #667eea; font-size: 0.9em;">Confidence: ${alert.confidence_score.toFixed(1)}%</span>
                    </div>
                `;
                alertsContainer.appendChild(card);
            });
        }

        // Function triggered by the HTML <select onchange="filterAlerts()">
        function filterAlerts() {
            const filterValue = document.getElementById('scam-type-filter').value;
            
            if (filterValue === 'all') {
                renderAlerts(window.allAlerts);
            } else {
                const filtered = window.allAlerts.filter(alert => alert.type === filterValue);
                renderAlerts(filtered);
            }
        }

        // Function to display the required overall accuracy number
        function displayAccuracyMeter(accuracy) {
            const meterHTML = `
                <div class="accuracy-meter-box">
                    <h3 style="margin: 0 0 10px 0; color: #2d3748;">System Performance</h3>
                    <p class="meter-score">Overall Accuracy: ${accuracy.toFixed(1)}%</p>
                    <p style="margin: 5px 0 0 0; color: #718096; font-size: 0.9em;">(Based on Rule-Engine evaluation against synthetic data)</p>
                </div>
            `;
            document.getElementById('accuracy-display').innerHTML = meterHTML;
        }

        // Initialize stats animation
        function animateStats() {
            let scans = 0;
            let threats = 0;
            const scanElement = document.getElementById('totalScans');
            const threatElement = document.getElementById('threatsBlocked');
            
            const interval = setInterval(() => {
                scans += Math.floor(Math.random() * 5) + 1;
                threats += Math.floor(Math.random() * 2);
                
                if (scanElement) scanElement.textContent = scans;
                if (threatElement) threatElement.textContent = threats;
                
                if (scans > 1000) clearInterval(interval);
            }, 100);
        }
        
        // Start animation when page loads
        window.addEventListener('load', animateStats);
    </script>
</body>
</html>








